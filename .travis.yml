# Travis auto-virtualenv isn't supported on OS X
language: generic
matrix:
  include:
    - dist: precise
      python: 2.7
      language: python
      python: "2.7"
      os: linux
      env: PYTHON=/usr/bin/python2.7 CATKIN_VERSION=groovy-devel
    - dist: precise
      python: 3.4
      language: python
      python: "3.4"
      os: linux
      env: PYTHON=/usr/bin/python3.4 CATKIN_VERSION=groovy-devel
    - dist: trusty
      python: 2.7
      language: python
      python: "2.7"
      os: linux
      env: PYTHON=/usr/bin/python2.7 CATKIN_VERSION=indigo-devel
    - dist: trusty
      python: 3.4
      language: python
      python: "3.4"
      os: linux
      env: PYTHON=/usr/bin/python3.4 CATKIN_VERSION=indigo-devel
before_install:
  # Install catkin_tools dependencies
  - pip install setuptools argparse catkin-pkg catkin_tools trollius codacy-coverage
install:
  # Install catkin_tools
  - python setup.py develop
script:
  # Run catkin_tools test harness
  - python setup.py nosetests -s --with-coverage --cover-xml
after_success:
  - python-codacy-coverage -r coverage.xml
notifications:
  email: false